\section{Related work}
\label{sec:relatedwork}

Improving data movement performance by balancing network load has been studied in previous works. 

In \cite{singh2003:GOAL} Singh et al. proposed GOAL -- Globally Oblivious Adaptive Locally to balance load using adaptive routing algorithm for torus networks.

%In early work \cite{Valiant81:Routing}, Valiant proposed a randomized routing mechanism that was mathematically proved to be able to route data globally with no sharing links. However the routing mechanism did not work well with local traffic as shown in \cite{singh2003:GOAL} by Singh et al. In the work of Pifarre et al. \cite{Pifarre91}, authors proposed minimal routing optimization. However, it did not work well with global optimization. In order to address the limitation of both the approaches, in \cite{singh2003:GOAL} Singh et al. proposed GOAL -- Globally Oblivious Adaptive Locally to choose the routing direction randomly balance load using adaptive routing algorithm for torus networks. GOAL is 

%In \cite{Rodriguez09}, Rodriguez et al. proposed oblivious routing schemes in extended generalized fat tree networks. It extended two algorithms called S-mod-k and D-mod-k to provide a better oblivious solution for slimmed networks. 

Prisacari et al. in \cite{Prisacari13a} showed that there is potential to optimize all-to-all collective exchange communication pattern at system level in fat tree networks and proved it mathematically and via simulations. The work is then extended in \cite{Prisacari13b} to propose a generic method to determine optimal pattern-specific routing for eXtended Generalized Fat Tree (XGFT). The method used a hybrid combination of integer linear programming (ILP) and dynamic programming. Interconnection network is divided into small subdomains and ILP is used for each subdomain. The local solution is then combined using dynamic programming. The proposed method takes up to several hours for several thousands of compute nodes interconnect network. In the work, Prisacari reduced solving time by optimizing globally with dynamic programming and locally with ILP. However, the search space was still large and led to long search time. No heuristic was proposed to cut the search time. In our work, we present networks as graphs, so our approaches can work with any type of network. In order to reduce the search time, we significantly prune the search space by feeding into the search only $k$ shortest paths. We also propose a heuristic to further reduce the search time. In addition, with the value of $k$ can be adjusted, we can balance between search time and search quality. In order to validate the approach, Prisacari used simulator while we implemented 

In the Blue Gene Q supercomputer (BGQ), Chen et al. \cite{Chen:BGQ} proposed a heuristic routing for BGQ interconnection network. A similar \cite{garcia2013:CrayDragonfly} work was done for Dragonfy interconnection network on Cray's supercomputers. However, both works were proposed for routing at system level. Our work is proposed as a supplementary work that leverages existing system routings and topologies to improve data transfer throughput. We take both applications' communication patterns and system's routings/topology into consideration. In BG/Q, the defaul routing uses only one path while we explore multiple paths for data movement. 

%The routing path is computed dynamically at the routing time based on coordinates of source and destination, partition shape and message size. BGQ routes a packet along the longest dimension of a partition first, shortest last. BGQ routes a message using single path. Different messages however might be routed using different paths. In other supercomputers, Garcia et al. in \cite{garcia2013:CrayDragonfly} proposed two deadlock-free routing mechanisms that support on-the-fly adaptive routing on Cray XC30 system for Dragonfly networks.

Some optimizations are done based on systemâ€™s specific characteristics such as \cite{Kumar:Allreduce} proposed optimization for MPI\_Allreduce in BG/Q based on the observation on number links and other hardware supports on compute nodes. Our work is also proposed for the BG/Q supercomputer. However, our work is for a broader range of communication patterns and it can be exteneded to other systems.

Our previous works in \cite{Vishwanath:GLEAN} and \cite{SDAV:Bui2014b} addressed a problem of I/O data aggregation. In a more recent work \cite{hbui:bgq} we presented our approaches for improving the performance very sparse. In this paper, we propose our approaches in balancing network load using oblivious routing with multiple paths on top of system's routing and its realization in a framework name OPTIQ. 

In the next section, we present an overview of the framework and functionalities of its components.
