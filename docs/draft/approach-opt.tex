\subsection{Model Optimization Approach}
\label{sec:optimization}

In this approach, we are given a set of pairs of sources and destinations. For each pair, there are an amount of data needed to transfer and a set of pre-computed k shortest paths that can be employed to transfer data. We are also given capacities of links that comprised of the k shortest paths. We need to search for an assignment of capacities for employed paths that results in minimum tranfer time for all pairs. 

Each data transfering request of a pair is denoted as a $job$. Set of all jobs is denoted as $Jobs$. Each job has an amount of data needed to transfer from the job's source to its destination. The amount of data is denoted as $Demand[job]$. In order to transfer the data, a job can employ paths from a pre-computed set of paths (computed prior in \textbf{Algorithm \ref{alg:h1}}) denoted as $kpaths_{job}$. Each path is denoted as $p$. A path $p$ might comprise from one to many links. A flow of a job from its source to its destination on a path is an amount of capacity given for the job on the path, it is denoted as $flow(job, p)$. All links ($i$, $j$) on path $p$ accomdate the same flow value for the job $flow(job, p)_{ij}$. $c(i,j)$ denotes the capacity of an edge from vertex $i$ to vertex $j$.

The total time to transfer data for all jobs in $Jobs$ is t. Our goal is to minize the time to transfer while satisfying the two below conditions:

\begin{itemize}
\item Total flow that a job needs equals to total flows given by its paths. For any $job$ in $Jobs$: 

$$\sum_{\forall p \in kpaths_{job}} flow[job, p] = \frac{Demand[job]}{t}$$

\item Total flow of an arc is less than its capacity: For any arc ($i$, $j$):

$$\sum_{\forall job \in Jobs}\sum_{\forall p \in kpaths_{job}} flow[job, p]_{ij} \leq c(i, j) $$

\end{itemize}

%\input{approach-ampl}

The model takes a set of nodes, a set of arcs and their corresponding capacity, a set of jobs (source/destination pairs), a demand for each job, a set of paths for each job, and a set of arcs for each path as inputs. It searches for an assignment of flow values (proportional capacity) for paths of all the jobs such that the transfer time for demands of all jobs is minimum.

We feed the model into solvers together with data of nodes, arcs, capacity, paths for jobs and get the paths with given proportional bandwidth. Based on proportional bandwidth, each path can take proportional demand of a job.

We realize algoirthms and other implementation in a framework named OPTIQ.
