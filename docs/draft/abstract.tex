Achievable networking performance of applications in a supercomputer depends on the exact combination of communication patterns of the applications and routing algorithms used by the supercomputer. In order to achieve the highest networking performance for the applications, the routing algorithms need to be designed optimally for the communication patterns. However, while the communication patterns usually have a wide spectrum and vary from application to application and even from phase to phase in an application, the routing algorithms have a limited variation and usually are optimized for typical communication patters. This results in high networking performance for favored communication patterns but low networking performance for others. In this paper, we present approaches for improving networking performance by rebalancing load on physical links on the Blue Gene Q supercomputer. We realize our approaches into a framework called OPTIQ and demonstrate the efficacy of our framework via a set of benchmarks. The results show that we can achieve 40\%-60\% higher throughput on average over 91 experiments and up to serveral times higher throughput than default MPI\_Alltoallv used in the Blue Gene Q supercomputer for certain communication patterns.

